<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ng·ªØ Ph√°p N4 - ÔΩû„Å¶„Åó„Åæ„ÅÜ | Tikme Learning</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', 'Noto Sans JP', sans-serif; 
            background: linear-gradient(135deg, #FFF7ED 0%, #ECFDF5 100%);
            min-height: 100vh;
        }
        .japanese { font-family: 'Noto Sans JP', sans-serif; }
        
        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(234, 88, 12, 0.5); }
            50% { box-shadow: 0 0 20px rgba(234, 88, 12, 0.8); }
        }
        .animate-in { animation: fadeInUp 0.5s ease-out; }
        .pulse { animation: pulse 2s infinite; }
        .shake { animation: shake 0.5s ease-in-out; }
        .glow { animation: glow 2s infinite; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // ==================== ICONS ====================
        const Icons = {
            Star: () => <span style={{fontSize: '1.2em'}}>‚≠ê</span>,
            Fire: () => <span style={{fontSize: '1.2em'}}>üî•</span>,
            Check: () => <span style={{fontSize: '1.2em'}}>‚úÖ</span>,
            Cross: () => <span style={{fontSize: '1.2em'}}>‚ùå</span>,
            Bulb: () => <span style={{fontSize: '1.2em'}}>üí°</span>,
            Book: () => <span style={{fontSize: '1.2em'}}>üìñ</span>,
            Mic: () => <span style={{fontSize: '1.2em'}}>üé§</span>,
            Speaker: () => <span style={{fontSize: '1.2em'}}>üîä</span>,
            Brain: () => <span style={{fontSize: '1.2em'}}>üß†</span>,
            Trophy: () => <span style={{fontSize: '1.2em'}}>üèÜ</span>,
            Rocket: () => <span style={{fontSize: '1.2em'}}>üöÄ</span>,
            Heart: () => <span style={{fontSize: '1.2em'}}>üíñ</span>,
            Sad: () => <span style={{fontSize: '1.2em'}}>üò¢</span>,
            Happy: () => <span style={{fontSize: '1.2em'}}>üòä</span>,
            Target: () => <span style={{fontSize: '1.2em'}}>üéØ</span>,
            Lightning: () => <span style={{fontSize: '1.2em'}}>‚ö°</span>,
            Pencil: () => <span style={{fontSize: '1.2em'}}>‚úèÔ∏è</span>,
            Medal: () => <span style={{fontSize: '1.2em'}}>üèÖ</span>,
            Sparkle: () => <span style={{fontSize: '1.2em'}}>‚ú®</span>,
            Warning: () => <span style={{fontSize: '1.2em'}}>‚ö†Ô∏è</span>,
            Info: () => <span style={{fontSize: '1.2em'}}>‚ÑπÔ∏è</span>,
            ArrowRight: () => <span style={{fontSize: '1em'}}>‚Üí</span>,
            Play: () => <span style={{fontSize: '1.2em'}}>‚ñ∂Ô∏è</span>,
        };

        // ==================== COLORS (Anthropic-inspired) ====================
        const colors = {
            // Primary - Cam Anthropic
            orange: {
                50: '#FFF7ED',
                100: '#FFEDD5',
                200: '#FED7AA',
                300: '#FDBA74',
                400: '#FB923C',
                500: '#F97316',
                600: '#EA580C',
                700: '#C2410C',
                800: '#9A3412',
                900: '#7C2D12',
            },
            // Accent - ƒê·ªè ƒë·∫≠m
            red: {
                50: '#FEF2F2',
                100: '#FEE2E2',
                500: '#EF4444',
                600: '#DC2626',
                700: '#B91C1C',
                800: '#991B1B',
            },
            // Success - Xanh l√°
            green: {
                50: '#F0FDF4',
                100: '#DCFCE7',
                200: '#BBF7D0',
                400: '#4ADE80',
                500: '#22C55E',
                600: '#16A34A',
                700: '#15803D',
                800: '#166534',
            },
            // Neutral
            slate: {
                50: '#F8FAFC',
                100: '#F1F5F9',
                200: '#E2E8F0',
                300: '#CBD5E1',
                400: '#94A3B8',
                500: '#64748B',
                600: '#475569',
                700: '#334155',
                800: '#1E293B',
                900: '#0F172A',
            },
            // Special
            amber: {
                100: '#FEF3C7',
                400: '#FBBF24',
                500: '#F59E0B',
            }
        };

        // ==================== MAIN APP ====================
        function App() {
            const [currentStep, setCurrentStep] = useState(0);
            const [score, setScore] = useState(0);
            const [totalQuestions, setTotalQuestions] = useState(0);
            const [showConfetti, setShowConfetti] = useState(false);
            const [completedSteps, setCompletedSteps] = useState([]);

            const steps = [
                { id: 0, title: 'Kh·ªüi ƒë·ªông', icon: <Icons.Rocket /> },
                { id: 1, title: 'Kh√°m ph√° √Ω nghƒ©a', icon: <Icons.Bulb /> },
                { id: 2, title: 'H·ªçc c·∫•u tr√∫c', icon: <Icons.Book /> },
                { id: 3, title: 'Chia ƒë·ªông t·ª´', icon: <Icons.Brain /> },
                { id: 4, title: 'Luy·ªán nghe - n√≥i', icon: <Icons.Mic /> },
                { id: 5, title: 'Th·ª±c h√†nh', icon: <Icons.Pencil /> },
                { id: 6, title: 'Ki·ªÉm tra t·ªïng h·ª£p', icon: <Icons.Target /> },
                { id: 7, title: 'K·∫øt qu·∫£', icon: <Icons.Trophy /> },
            ];

            const addScore = (points) => {
                setScore(prev => prev + points);
                if (points > 0) {
                    setShowConfetti(true);
                    setTimeout(() => setShowConfetti(false), 1000);
                }
            };

            const completeStep = (stepId) => {
                if (!completedSteps.includes(stepId)) {
                    setCompletedSteps([...completedSteps, stepId]);
                }
            };

            const nextStep = () => {
                completeStep(currentStep);
                setCurrentStep(prev => Math.min(prev + 1, steps.length - 1));
            };

            const prevStep = () => {
                setCurrentStep(prev => Math.max(prev - 1, 0));
            };

            return (
                <div style={{
                    maxWidth: '800px',
                    margin: '0 auto',
                    padding: '20px',
                    minHeight: '100vh',
                }}>
                    {/* Header */}
                    <Header score={score} currentStep={currentStep} steps={steps} completedSteps={completedSteps} />
                    
                    {/* Progress Bar */}
                    <ProgressBar current={currentStep} total={steps.length} />
                    
                    {/* Confetti Effect */}
                    {showConfetti && <Confetti />}
                    
                    {/* Main Content */}
                    <div className="animate-in" key={currentStep}>
                        {currentStep === 0 && <Step0_Intro onNext={nextStep} />}
                        {currentStep === 1 && <Step1_Meaning onNext={nextStep} onPrev={prevStep} addScore={addScore} />}
                        {currentStep === 2 && <Step2_Structure onNext={nextStep} onPrev={prevStep} addScore={addScore} />}
                        {currentStep === 3 && <Step3_Conjugation onNext={nextStep} onPrev={prevStep} addScore={addScore} />}
                        {currentStep === 4 && <Step4_ListenSpeak onNext={nextStep} onPrev={prevStep} addScore={addScore} />}
                        {currentStep === 5 && <Step5_Practice onNext={nextStep} onPrev={prevStep} addScore={addScore} />}
                        {currentStep === 6 && <Step6_FinalTest onNext={nextStep} onPrev={prevStep} addScore={addScore} setTotalQuestions={setTotalQuestions} />}
                        {currentStep === 7 && <Step7_Results score={score} totalQuestions={totalQuestions} onRestart={() => {
                            setCurrentStep(0);
                            setScore(0);
                            setCompletedSteps([]);
                        }} />}
                    </div>
                </div>
            );
        }

        // ==================== HEADER ====================
        function Header({ score, currentStep, steps, completedSteps }) {
            return (
                <div style={{
                    background: 'linear-gradient(135deg, ' + colors.orange[600] + ' 0%, ' + colors.red[600] + ' 100%)',
                    borderRadius: '20px',
                    padding: '20px',
                    marginBottom: '20px',
                    color: 'white',
                    boxShadow: '0 10px 40px rgba(234, 88, 12, 0.3)',
                }}>
                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px' }}>
                        <div>
                            <div style={{ fontSize: '14px', opacity: 0.9, marginBottom: '5px' }}>NG·ªÆ PH√ÅP N4 | TIKME</div>
                            <div style={{ fontSize: '28px', fontWeight: '900' }} className="japanese">ÔΩû„Å¶„Åó„Åæ„ÅÜ</div>
                        </div>
                        <div style={{
                            background: 'rgba(255,255,255,0.2)',
                            borderRadius: '15px',
                            padding: '10px 20px',
                            backdropFilter: 'blur(10px)',
                        }}>
                            <div style={{ fontSize: '12px', opacity: 0.9 }}>ƒêI·ªÇM S·ªê</div>
                            <div style={{ fontSize: '28px', fontWeight: '700' }}>{score} <Icons.Star /></div>
                        </div>
                    </div>
                    
                    {/* Step indicators */}
                    <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>
                        {steps.map((step, idx) => (
                            <div key={idx} style={{
                                width: '36px',
                                height: '36px',
                                borderRadius: '50%',
                                background: idx === currentStep 
                                    ? 'white' 
                                    : completedSteps.includes(idx) 
                                        ? 'rgba(255,255,255,0.8)' 
                                        : 'rgba(255,255,255,0.2)',
                                color: idx === currentStep || completedSteps.includes(idx) ? colors.orange[600] : 'white',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontSize: '16px',
                                fontWeight: '600',
                                transition: 'all 0.3s ease',
                                transform: idx === currentStep ? 'scale(1.1)' : 'scale(1)',
                            }}>
                                {completedSteps.includes(idx) ? '‚úì' : step.icon}
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // ==================== PROGRESS BAR ====================
        function ProgressBar({ current, total }) {
            const progress = ((current + 1) / total) * 100;
            return (
                <div style={{
                    background: colors.slate[200],
                    borderRadius: '10px',
                    height: '8px',
                    marginBottom: '20px',
                    overflow: 'hidden',
                }}>
                    <div style={{
                        background: 'linear-gradient(90deg, ' + colors.orange[500] + ', ' + colors.red[500] + ')',
                        height: '100%',
                        width: progress + '%',
                        transition: 'width 0.5s ease',
                        borderRadius: '10px',
                    }} />
                </div>
            );
        }

        // ==================== CONFETTI ====================
        function Confetti() {
            const particles = ['üéâ', '‚≠ê', '‚ú®', 'üåü', 'üí´'];
            return (
                <div style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, pointerEvents: 'none', zIndex: 1000 }}>
                    {[...Array(20)].map((_, i) => (
                        <div key={i} style={{
                            position: 'absolute',
                            left: Math.random() * 100 + '%',
                            top: '50%',
                            fontSize: '24px',
                            animation: 'confetti 1s ease-out forwards',
                            animationDelay: Math.random() * 0.5 + 's',
                        }}>
                            {particles[Math.floor(Math.random() * particles.length)]}
                        </div>
                    ))}
                </div>
            );
        }

        // ==================== CARD COMPONENT ====================
        function Card({ children, style = {}, highlight = false, variant = 'default' }) {
            const variants = {
                default: { background: 'white', border: 'none' },
                orange: { background: colors.orange[50], border: '2px solid ' + colors.orange[200] },
                green: { background: colors.green[50], border: '2px solid ' + colors.green[200] },
                red: { background: colors.red[50], border: '2px solid ' + colors.red[100] },
                amber: { background: colors.amber[100], border: '2px solid ' + colors.amber[400] },
            };
            
            return (
                <div style={{
                    ...variants[variant],
                    borderRadius: '16px',
                    padding: '20px',
                    marginBottom: '16px',
                    boxShadow: highlight ? '0 0 0 3px ' + colors.orange[400] : '0 4px 20px rgba(0,0,0,0.08)',
                    transition: 'all 0.3s ease',
                    ...style,
                }}>
                    {children}
                </div>
            );
        }

        // ==================== BUTTON ====================
        function Button({ children, onClick, variant = 'primary', disabled = false, fullWidth = false, size = 'medium' }) {
            const variants = {
                primary: {
                    background: 'linear-gradient(135deg, ' + colors.orange[500] + ', ' + colors.red[500] + ')',
                    color: 'white',
                },
                secondary: {
                    background: colors.slate[100],
                    color: colors.slate[700],
                },
                success: {
                    background: 'linear-gradient(135deg, ' + colors.green[500] + ', ' + colors.green[600] + ')',
                    color: 'white',
                },
                outline: {
                    background: 'transparent',
                    color: colors.orange[600],
                    border: '2px solid ' + colors.orange[400],
                },
            };
            
            const sizes = {
                small: { padding: '8px 16px', fontSize: '14px' },
                medium: { padding: '12px 24px', fontSize: '16px' },
                large: { padding: '16px 32px', fontSize: '18px' },
            };
            
            return (
                <button
                    onClick={onClick}
                    disabled={disabled}
                    style={{
                        ...variants[variant],
                        ...sizes[size],
                        border: variants[variant].border || 'none',
                        borderRadius: '12px',
                        fontWeight: '600',
                        cursor: disabled ? 'not-allowed' : 'pointer',
                        opacity: disabled ? 0.5 : 1,
                        width: fullWidth ? '100%' : 'auto',
                        transition: 'all 0.2s ease',
                        display: 'inline-flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        gap: '8px',
                    }}
                    onMouseOver={(e) => !disabled && (e.target.style.transform = 'translateY(-2px)')}
                    onMouseOut={(e) => (e.target.style.transform = 'translateY(0)')}
                >
                    {children}
                </button>
            );
        }

        // ==================== STEP 0: INTRO ====================
        function Step0_Intro({ onNext }) {
            const [showStory, setShowStory] = useState(false);
            
            return (
                <div>
                    <Card variant="orange">
                        <div style={{ textAlign: 'center', padding: '20px 0' }}>
                            <div style={{ fontSize: '60px', marginBottom: '20px' }}>üç∞</div>
                            <h2 style={{ color: colors.orange[700], marginBottom: '15px', fontSize: '24px' }}>
                                C√¢u chuy·ªán c·ªßa b·∫°n...
                            </h2>
                            <p style={{ color: colors.slate[600], lineHeight: '1.8', fontSize: '18px' }}>
                                B·∫°n ƒë√£ bao gi·ªù <strong style={{color: colors.red[600]}}>ƒÉn h·∫øt c·∫£ h·ªôp kem</strong> r·ªìi h·ªëi h·∫≠n ch∆∞a?
                            </p>
                            <p style={{ color: colors.slate[600], lineHeight: '1.8', fontSize: '18px', marginTop: '10px' }}>
                                Hay <strong style={{color: colors.green[600]}}>l√†m xong b√†i t·∫≠p</strong> m√† th·∫•y t·ª± h√†o?
                            </p>
                        </div>
                    </Card>

                    {!showStory ? (
                        <div style={{ textAlign: 'center' }}>
                            <Button onClick={() => setShowStory(true)} size="large">
                                <Icons.Sparkle /> Kh√°m ph√° b√≠ m·∫≠t
                            </Button>
                        </div>
                    ) : (
                        <div className="animate-in">
                            <Card highlight>
                                <div style={{ textAlign: 'center' }}>
                                    <div style={{ 
                                        fontSize: '20px', 
                                        color: colors.orange[600], 
                                        marginBottom: '15px',
                                        fontWeight: '600'
                                    }}>
                                        <Icons.Bulb /> Ng∆∞·ªùi Nh·∫≠t c√≥ M·ªòT m·∫´u c√¢u di·ªÖn t·∫£ C·∫¢ HAI c·∫£m x√∫c ƒë√≥!
                                    </div>
                                    
                                    <div style={{
                                        fontSize: '48px',
                                        fontWeight: '900',
                                        color: colors.red[700],
                                        margin: '20px 0',
                                        textShadow: '2px 2px 0 ' + colors.orange[200],
                                    }} className="japanese">
                                        ÔΩû„Å¶„Åó„Åæ„ÅÜ
                                    </div>
                                    
                                    <div style={{
                                        background: colors.amber[100],
                                        borderRadius: '12px',
                                        padding: '15px',
                                        marginTop: '20px',
                                    }}>
                                        <div style={{ fontWeight: '600', color: colors.slate[700] }}>
                                            <Icons.Brain /> M·∫πo nh·ªõ si√™u d·ªÖ:
                                        </div>
                                        <div style={{ 
                                            fontSize: '20px', 
                                            color: colors.red[600],
                                            marginTop: '10px',
                                            fontWeight: '700'
                                        }}>
                                            "„Åó„Åæ„ÅÜ" = "shi-M·∫§T" ‚Üí L√†m g√¨ ƒë√≥ r·ªìi M·∫§T lu√¥n!
                                        </div>
                                    </div>
                                </div>
                            </Card>
                            
                            <div style={{ textAlign: 'center', marginTop: '20px' }}>
                                <Button onClick={onNext} size="large" variant="success">
                                    B·∫Øt ƒë·∫ßu h·ªçc ngay! <Icons.Rocket />
                                </Button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // ==================== STEP 1: MEANING ====================
        function Step1_Meaning({ onNext, onPrev, addScore }) {
            const [selectedMeaning, setSelectedMeaning] = useState(null);
            const [quizAnswer, setQuizAnswer] = useState(null);
            const [showResult, setShowResult] = useState(false);
            const [readAloud, setReadAloud] = useState({ m1: false, m2: false });

            const checkAnswer = (answer) => {
                setQuizAnswer(answer);
                setShowResult(true);
                if (answer === 'both') {
                    addScore(10);
                }
            };

            return (
                <div>
                    <Card variant="orange">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '15px' }}>
                            <span style={{ 
                                background: colors.orange[500], 
                                color: 'white', 
                                padding: '5px 12px', 
                                borderRadius: '20px',
                                fontSize: '14px',
                                fontWeight: '600'
                            }}>
                                CHUNK 1
                            </span>
                            <h2 style={{ color: colors.orange[700], margin: 0 }}>
                                <Icons.Bulb /> Kh√°m ph√° 2 √Ω nghƒ©a
                            </h2>
                        </div>
                    </Card>

                    {/* Meaning 1 */}
                    <Card variant="green">
                        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '15px' }}>
                            <div style={{
                                background: colors.green[500],
                                color: 'white',
                                width: '50px',
                                height: '50px',
                                borderRadius: '50%',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontSize: '24px',
                                flexShrink: 0,
                            }}>
                                <Icons.Happy />
                            </div>
                            <div style={{ flex: 1 }}>
                                <h3 style={{ color: colors.green[700], marginBottom: '10px', fontSize: '20px' }}>
                                    ‚ë† HO√ÄN TH√ÄNH TR·ªåN V·∫∏N
                                </h3>
                                <p style={{ color: colors.slate[600], marginBottom: '10px' }}>
                                    Di·ªÖn t·∫£ h√†nh ƒë·ªông ƒë√£ <strong style={{color: colors.green[600]}}>ho√†n t·∫•t ho√†n to√†n</strong>, kh√¥ng th·ªÉ thay ƒë·ªïi
                                </p>
                                <div style={{
                                    background: 'white',
                                    borderRadius: '10px',
                                    padding: '12px',
                                    marginTop: '10px',
                                }}>
                                    <div style={{ color: colors.slate[500], fontSize: '14px', marginBottom: '5px' }}>
                                        T∆∞∆°ng ƒë∆∞∆°ng ti·∫øng Vi·ªát:
                                    </div>
                                    <div style={{ color: colors.green[700], fontWeight: '600', fontSize: '18px' }}>
                                        "ƒë√£... xong", "ƒë√£... h·∫øt", "ƒë√£... m·∫•t r·ªìi"
                                    </div>
                                </div>
                                
                                {/* Read Aloud Practice */}
                                <div style={{ 
                                    marginTop: '15px', 
                                    background: colors.green[100], 
                                    borderRadius: '10px', 
                                    padding: '12px' 
                                }}>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '10px' }}>
                                        <Icons.Speaker />
                                        <span style={{ fontWeight: '600', color: colors.green[700] }}>Luy·ªán ph√°t √¢m:</span>
                                    </div>
                                    <div style={{ 
                                        fontSize: '22px', 
                                        color: colors.slate[800],
                                        marginBottom: '10px'
                                    }} className="japanese">
                                        È£ü„Åπ„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü
                                    </div>
                                    <div style={{ fontSize: '14px', color: colors.slate[500], marginBottom: '10px' }}>
                                        ta-be-te shi-ma-i-ma-shi-ta
                                    </div>
                                    <Button 
                                        variant={readAloud.m1 ? "success" : "outline"} 
                                        size="small"
                                        onClick={() => {
                                            setReadAloud({...readAloud, m1: true});
                                            if (!readAloud.m1) addScore(5);
                                        }}
                                    >
                                        {readAloud.m1 ? <><Icons.Check /> ƒê√£ ƒë·ªçc!</> : <><Icons.Mic /> T√¥i ƒë√£ ƒë·ªçc to</>}
                                    </Button>
                                </div>
                            </div>
                        </div>
                    </Card>

                    {/* Meaning 2 */}
                    <Card variant="red">
                        <div style={{ display: 'flex', alignItems: 'flex-start', gap: '15px' }}>
                            <div style={{
                                background: colors.red[500],
                                color: 'white',
                                width: '50px',
                                height: '50px',
                                borderRadius: '50%',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                fontSize: '24px',
                                flexShrink: 0,
                            }}>
                                <Icons.Sad />
                            </div>
                            <div style={{ flex: 1 }}>
                                <h3 style={{ color: colors.red[700], marginBottom: '10px', fontSize: '20px' }}>
                                    ‚ë° TI·∫æC NU·ªêI / H·ªêI H·∫¨N
                                </h3>
                                <p style={{ color: colors.slate[600], marginBottom: '10px' }}>
                                    Di·ªÖn t·∫£ <strong style={{color: colors.red[600]}}>s·ª± ƒë√°ng ti·∫øc, h·ªëi h·∫≠n</strong> v·ªÅ vi·ªác ƒë√£ x·∫£y ra
                                </p>
                                <div style={{
                                    background: 'white',
                                    borderRadius: '10px',
                                    padding: '12px',
                                    marginTop: '10px',
                                }}>
                                    <div style={{ color: colors.slate[500], fontSize: '14px', marginBottom: '5px' }}>
                                        T∆∞∆°ng ƒë∆∞∆°ng ti·∫øng Vi·ªát:
                                    </div>
                                    <div style={{ color: colors.red[700], fontWeight: '600', fontSize: '18px' }}>
                                        "l·ª°...", "ƒë√£ l·ª°...", "m·∫•t r·ªìi"
                                    </div>
                                </div>
                                
                                {/* Read Aloud Practice */}
                                <div style={{ 
                                    marginTop: '15px', 
                                    background: colors.red[100], 
                                    borderRadius: '10px', 
                                    padding: '12px' 
                                }}>
                                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '10px' }}>
                                        <Icons.Speaker />
                                        <span style={{ fontWeight: '600', color: colors.red[700] }}>Luy·ªán ph√°t √¢m:</span>
                                    </div>
                                    <div style={{ 
                                        fontSize: '22px', 
                                        color: colors.slate[800],
                                        marginBottom: '10px'
                                    }} className="japanese">
                                        „Å™„Åè„Åó„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü
                                    </div>
                                    <div style={{ fontSize: '14px', color: colors.slate[500], marginBottom: '10px' }}>
                                        na-ku-shi-te shi-ma-i-ma-shi-ta
                                    </div>
                                    <Button 
                                        variant={readAloud.m2 ? "success" : "outline"} 
                                        size="small"
                                        onClick={() => {
                                            setReadAloud({...readAloud, m2: true});
                                            if (!readAloud.m2) addScore(5);
                                        }}
                                    >
                                        {readAloud.m2 ? <><Icons.Check /> ƒê√£ ƒë·ªçc!</> : <><Icons.Mic /> T√¥i ƒë√£ ƒë·ªçc to</>}
                                    </Button>
                                </div>
                            </div>
                        </div>
                    </Card>

                    {/* Quick Quiz */}
                    <Card highlight>
                        <div style={{ textAlign: 'center' }}>
                            <div style={{ 
                                display: 'inline-flex', 
                                alignItems: 'center', 
                                gap: '8px',
                                background: colors.orange[100],
                                padding: '8px 16px',
                                borderRadius: '20px',
                                marginBottom: '15px'
                            }}>
                                <Icons.Target /> <strong style={{color: colors.orange[700]}}>MINI QUIZ (+10 ƒëi·ªÉm)</strong>
                            </div>
                            
                            <h3 style={{ color: colors.slate[800], marginBottom: '20px' }}>
                                ÔΩû„Å¶„Åó„Åæ„ÅÜ c√≥ m·∫•y √Ω nghƒ©a ch√≠nh?
                            </h3>
                            
                            <div style={{ display: 'flex', gap: '10px', justifyContent: 'center', flexWrap: 'wrap' }}>
                                {['1', '2', '3'].map((opt) => (
                                    <button
                                        key={opt}
                                        onClick={() => checkAnswer(opt === '2' ? 'both' : opt)}
                                        disabled={showResult}
                                        style={{
                                            padding: '15px 30px',
                                            fontSize: '20px',
                                            fontWeight: '600',
                                            border: '2px solid ' + (
                                                showResult && opt === '2' ? colors.green[500] :
                                                showResult && quizAnswer === opt && opt !== '2' ? colors.red[500] :
                                                colors.slate[300]
                                            ),
                                            borderRadius: '12px',
                                            background: showResult && opt === '2' ? colors.green[100] :
                                                showResult && quizAnswer === opt && opt !== '2' ? colors.red[100] :
                                                'white',
                                            cursor: showResult ? 'default' : 'pointer',
                                            transition: 'all 0.2s ease',
                                        }}
                                    >
                                        {opt} √Ω nghƒ©a
                                    </button>
                                ))}
                            </div>
                            
                            {showResult && (
                                <div style={{
                                    marginTop: '20px',
                                    padding: '15px',
                                    borderRadius: '12px',
                                    background: quizAnswer === 'both' ? colors.green[100] : colors.red[100],
                                }} className="animate-in">
                                    {quizAnswer === 'both' ? (
                                        <div style={{ color: colors.green[700] }}>
                                            <Icons.Check /> <strong>Ch√≠nh x√°c!</strong> ÔΩû„Å¶„Åó„Åæ„ÅÜ c√≥ 2 √Ω nghƒ©a: Ho√†n th√†nh & Ti·∫øc nu·ªëi
                                        </div>
                                    ) : (
                                        <div style={{ color: colors.red[700] }}>
                                            <Icons.Cross /> ƒê√°p √°n ƒë√∫ng l√† <strong>2 √Ω nghƒ©a</strong>: Ho√†n th√†nh & Ti·∫øc nu·ªëi
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </Card>

                    {/* Navigation */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '20px' }}>
                        <Button variant="secondary" onClick={onPrev}>‚Üê Quay l·∫°i</Button>
                        <Button 
                            onClick={onNext} 
                            disabled={!showResult || !readAloud.m1 || !readAloud.m2}
                        >
                            Ti·∫øp theo <Icons.ArrowRight />
                        </Button>
                    </div>
                    
                    {(!readAloud.m1 || !readAloud.m2) && showResult && (
                        <div style={{ 
                            textAlign: 'center', 
                            marginTop: '10px', 
                            color: colors.orange[600],
                            fontSize: '14px'
                        }}>
                            <Icons.Warning /> H√£y ƒë·ªçc to c·∫£ 2 v√≠ d·ª• ƒë·ªÉ ti·∫øp t·ª•c!
                        </div>
                    )}
                </div>
            );
        }

        // ==================== STEP 2: STRUCTURE ====================
        function Step2_Structure({ onNext, onPrev, addScore }) {
            const [showShortForm, setShowShortForm] = useState(false);
            const [quizDone, setQuizDone] = useState(false);
            const [selectedAnswer, setSelectedAnswer] = useState(null);

            const handleQuiz = (answer) => {
                setSelectedAnswer(answer);
                setQuizDone(true);
                if (answer === 'correct') {
                    addScore(10);
                }
            };

            return (
                <div>
                    <Card variant="orange">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '15px' }}>
                            <span style={{ 
                                background: colors.orange[500], 
                                color: 'white', 
                                padding: '5px 12px', 
                                borderRadius: '20px',
                                fontSize: '14px',
                                fontWeight: '600'
                            }}>
                                CHUNK 2
                            </span>
                            <h2 style={{ color: colors.orange[700], margin: 0 }}>
                                <Icons.Book /> C·∫•u tr√∫c ng·ªØ ph√°p
                            </h2>
                        </div>
                    </Card>

                    {/* Main Structure */}
                    <Card highlight>
                        <div style={{ textAlign: 'center', padding: '20px 0' }}>
                            <div style={{ fontSize: '14px', color: colors.slate[500], marginBottom: '10px' }}>
                                C√îNG TH·ª®C V√ÄNG
                            </div>
                            <div style={{
                                fontSize: '32px',
                                fontWeight: '800',
                                color: colors.orange[700],
                                marginBottom: '15px',
                            }} className="japanese">
                                <span style={{ 
                                    background: colors.green[100], 
                                    padding: '5px 15px', 
                                    borderRadius: '10px',
                                    color: colors.green[700]
                                }}>
                                    ƒê·ªông t·ª´ th·ªÉ „Å¶
                                </span>
                                <span style={{ margin: '0 10px', color: colors.slate[400] }}>Ôºã</span>
                                <span style={{ 
                                    background: colors.red[100], 
                                    padding: '5px 15px', 
                                    borderRadius: '10px',
                                    color: colors.red[700]
                                }}>
                                    „Åó„Åæ„ÅÜ
                                </span>
                            </div>
                            
                            <div style={{
                                background: colors.amber[100],
                                borderRadius: '12px',
                                padding: '15px',
                                marginTop: '20px',
                                display: 'inline-block'
                            }}>
                                <Icons.Lightning /> <strong>Nh·ªõ nhanh:</strong> Th·ªÉ „Å¶ + „Åó„Åæ„ÅÜ = XONG M·∫§T!
                            </div>
                        </div>
                    </Card>

                    {/* Short Form Toggle */}
                    <Card>
                        <div style={{ 
                            display: 'flex', 
                            justifyContent: 'space-between', 
                            alignItems: 'center',
                            marginBottom: showShortForm ? '20px' : 0
                        }}>
                            <h3 style={{ color: colors.slate[800] }}>
                                <Icons.Fire /> D·∫°ng r√∫t g·ªçn (Âè£Ë™û - Kh·∫©u ng·ªØ)
                            </h3>
                            <Button 
                                variant={showShortForm ? "success" : "primary"} 
                                size="small"
                                onClick={() => {
                                    if (!showShortForm) addScore(5);
                                    setShowShortForm(true);
                                }}
                            >
                                {showShortForm ? 'ƒê√£ m·ªü kh√≥a!' : 'M·ªü kh√≥a +5ƒë'}
                            </Button>
                        </div>
                        
                        {showShortForm && (
                            <div className="animate-in">
                                <div style={{ 
                                    display: 'grid', 
                                    gridTemplateColumns: '1fr 1fr', 
                                    gap: '15px',
                                    marginBottom: '15px'
                                }}>
                                    <div style={{
                                        background: colors.slate[100],
                                        borderRadius: '12px',
                                        padding: '15px',
                                        textAlign: 'center'
                                    }}>
                                        <div style={{ fontSize: '14px', color: colors.slate[500], marginBottom: '8px' }}>
                                            D·∫°ng ƒë·∫ßy ƒë·ªß
                                        </div>
                                        <div style={{ fontSize: '24px', fontWeight: '700' }} className="japanese">
                                            ÔΩû„Å¶„Åó„Åæ„ÅÜ
                                        </div>
                                    </div>
                                    <div style={{
                                        background: colors.orange[100],
                                        borderRadius: '12px',
                                        padding: '15px',
                                        textAlign: 'center',
                                        border: '2px solid ' + colors.orange[300]
                                    }}>
                                        <div style={{ fontSize: '14px', color: colors.orange[600], marginBottom: '8px' }}>
                                            D·∫°ng r√∫t g·ªçn ‚≠ê
                                        </div>
                                        <div style={{ fontSize: '24px', fontWeight: '700', color: colors.orange[700] }} className="japanese">
                                            ÔΩû„Å°„ÇÉ„ÅÜ
                                        </div>
                                    </div>
                                </div>
                                
                                <div style={{ 
                                    display: 'grid', 
                                    gridTemplateColumns: '1fr 1fr', 
                                    gap: '15px' 
                                }}>
                                    <div style={{
                                        background: colors.slate[100],
                                        borderRadius: '12px',
                                        padding: '15px',
                                        textAlign: 'center'
                                    }}>
                                        <div style={{ fontSize: '24px', fontWeight: '700' }} className="japanese">
                                            ÔΩû„Åß„Åó„Åæ„ÅÜ
                                        </div>
                                    </div>
                                    <div style={{
                                        background: colors.orange[100],
                                        borderRadius: '12px',
                                        padding: '15px',
                                        textAlign: 'center',
                                        border: '2px solid ' + colors.orange[300]
                                    }}>
                                        <div style={{ fontSize: '24px', fontWeight: '700', color: colors.orange[700] }} className="japanese">
                                            ÔΩû„Åò„ÇÉ„ÅÜ
                                        </div>
                                    </div>
                                </div>
                                
                                <div style={{
                                    marginTop: '15px',
                                    padding: '12px',
                                    background: colors.red[50],
                                    borderRadius: '10px',
                                    borderLeft: '4px solid ' + colors.red[500]
                                }}>
                                    <Icons.Warning /> <strong style={{color: colors.red[700]}}>L∆∞u √Ω:</strong>
                                    <span style={{color: colors.slate[600]}}> D·∫°ng r√∫t g·ªçn ch·ªâ d√πng v·ªõi b·∫°n b√®, KH√îNG d√πng v·ªõi s·∫øp/ng∆∞·ªùi l·ªõn tu·ªïi!</span>
                                </div>
                            </div>
                        )}
                    </Card>

                    {/* Quiz */}
                    {showShortForm && (
                        <Card variant="amber" className="animate-in">
                            <div style={{ textAlign: 'center' }}>
                                <div style={{ marginBottom: '15px' }}>
                                    <Icons.Target /> <strong>TH·ª∞C H√ÄNH (+10 ƒëi·ªÉm)</strong>
                                </div>
                                <div style={{ fontSize: '20px', marginBottom: '20px', color: colors.slate[800] }}>
                                    <span className="japanese">È£ü„Åπ„Å¶„Åó„Åæ„ÅÜ</span> r√∫t g·ªçn th√†nh?
                                </div>
                                
                                <div style={{ display: 'flex', gap: '10px', justifyContent: 'center', flexWrap: 'wrap' }}>
                                    {[
                                        { text: 'È£ü„Åπ„Å°„ÇÉ„ÅÜ', value: 'correct' },
                                        { text: 'È£ü„Åπ„Åò„ÇÉ„ÅÜ', value: 'wrong1' },
                                        { text: 'È£ü„Åπ„Åó„Åæ„ÅÜ', value: 'wrong2' },
                                    ].map((opt) => (
                                        <button
                                            key={opt.value}
                                            onClick={() => handleQuiz(opt.value)}
                                            disabled={quizDone}
                                            className="japanese"
                                            style={{
                                                padding: '12px 20px',
                                                fontSize: '20px',
                                                border: '2px solid ' + (
                                                    quizDone && opt.value === 'correct' ? colors.green[500] :
                                                    quizDone && selectedAnswer === opt.value && opt.value !== 'correct' ? colors.red[500] :
                                                    colors.slate[300]
                                                ),
                                                borderRadius: '12px',
                                                background: quizDone && opt.value === 'correct' ? colors.green[100] :
                                                    quizDone && selectedAnswer === opt.value && opt.value !== 'correct' ? colors.red[100] :
                                                    'white',
                                                cursor: quizDone ? 'default' : 'pointer',
                                            }}
                                        >
                                            {opt.text}
                                        </button>
                                    ))}
                                </div>
                                
                                {quizDone && (
                                    <div style={{ marginTop: '15px' }} className="animate-in">
                                        {selectedAnswer === 'correct' ? (
                                            <span style={{color: colors.green[600]}}><Icons.Check /> Xu·∫•t s·∫Øc!</span>
                                        ) : (
                                            <span style={{color: colors.red[600]}}>
                                                <Icons.Cross /> ƒê√°p √°n: <strong className="japanese">È£ü„Åπ„Å°„ÇÉ„ÅÜ</strong> („Å¶‚Üí„Å°„ÇÉ)
                                            </span>
                                        )}
                                    </div>
                                )}
                            </div>
                        </Card>
                    )}

                    {/* Navigation */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '20px' }}>
                        <Button variant="secondary" onClick={onPrev}>‚Üê Quay l·∫°i</Button>
                        <Button onClick={onNext} disabled={!quizDone}>
                            Ti·∫øp theo <Icons.ArrowRight />
                        </Button>
                    </div>
                </div>
            );
        }

        // ==================== STEP 3: CONJUGATION ====================
        function Step3_Conjugation({ onNext, onPrev, addScore }) {
            const [activeGroup, setActiveGroup] = useState(1);
            const [quizAnswers, setQuizAnswers] = useState({});
            const [showAnswers, setShowAnswers] = useState(false);

            const groups = {
                1: {
                    title: 'Nh√≥m 1 (‰∫îÊÆµ Godan)',
                    color: colors.orange,
                    rules: [
                        { ending: '„ÅÜ„Éª„Å§„Éª„Çã', change: '‚Üí „Å£„Å¶', example: 'Ë≤∑„ÅÜ', result: 'Ë≤∑„Å£„Å¶„Åó„Åæ„ÅÜ' },
                        { ending: '„ÇÄ„Éª„Å∂„Éª„Å¨', change: '‚Üí „Çì„Åß', example: 'Ë™≠„ÇÄ', result: 'Ë™≠„Çì„Åß„Åó„Åæ„ÅÜ' },
                        { ending: '„Åè', change: '‚Üí „ÅÑ„Å¶', example: 'Êõ∏„Åè', result: 'Êõ∏„ÅÑ„Å¶„Åó„Åæ„ÅÜ' },
                        { ending: '„Åê', change: '‚Üí „ÅÑ„Åß', example: 'Ê≥≥„Åê', result: 'Ê≥≥„ÅÑ„Åß„Åó„Åæ„ÅÜ' },
                        { ending: '„Åô', change: '‚Üí „Åó„Å¶', example: 'Ë©±„Åô', result: 'Ë©±„Åó„Å¶„Åó„Åæ„ÅÜ' },
                    ]
                },
                2: {
                    title: 'Nh√≥m 2 (‰∏ÄÊÆµ Ichidan)',
                    color: colors.green,
                    rules: [
                        { ending: '„Çã', change: '‚Üí „Å¶', example: 'È£ü„Åπ„Çã', result: 'È£ü„Åπ„Å¶„Åó„Åæ„ÅÜ' },
                        { ending: '„Çã', change: '‚Üí „Å¶', example: 'Ë¶ã„Çã', result: 'Ë¶ã„Å¶„Åó„Åæ„ÅÜ' },
                        { ending: '„Çã', change: '‚Üí „Å¶', example: 'Âøò„Çå„Çã', result: 'Âøò„Çå„Å¶„Åó„Åæ„ÅÜ' },
                    ]
                },
                3: {
                    title: 'Nh√≥m 3 (B·∫•t quy t·∫Øc)',
                    color: colors.red,
                    rules: [
                        { ending: '„Åô„Çã', change: '‚Üí „Åó„Å¶', example: '„Åô„Çã', result: '„Åó„Å¶„Åó„Åæ„ÅÜ' },
                        { ending: 'Êù•„Çã', change: '‚Üí Êù•„Å¶', example: 'Êù•„Çã', result: 'Êù•„Å¶„Åó„Åæ„ÅÜ' },
                    ]
                }
            };

            const quizItems = [
                { verb: 'È£≤„ÇÄ', group: 1, answer: 'È£≤„Çì„Åß„Åó„Åæ„ÅÜ' },
                { verb: 'Ëµ∑„Åç„Çã', group: 2, answer: 'Ëµ∑„Åç„Å¶„Åó„Åæ„ÅÜ' },
                { verb: 'ÂãâÂº∑„Åô„Çã', group: 3, answer: 'ÂãâÂº∑„Åó„Å¶„Åó„Åæ„ÅÜ' },
            ];

            const checkQuiz = () => {
                setShowAnswers(true);
                let correct = 0;
                quizItems.forEach((item, idx) => {
                    if (quizAnswers[idx] === item.answer) correct++;
                });
                addScore(correct * 5);
            };

            return (
                <div>
                    <Card variant="orange">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '15px' }}>
                            <span style={{ 
                                background: colors.orange[500], 
                                color: 'white', 
                                padding: '5px 12px', 
                                borderRadius: '20px',
                                fontSize: '14px',
                                fontWeight: '600'
                            }}>
                                CHUNK 3
                            </span>
                            <h2 style={{ color: colors.orange[700], margin: 0 }}>
                                <Icons.Brain /> C√°ch chia ƒë·ªông t·ª´
                            </h2>
                        </div>
                    </Card>

                    {/* Group Tabs */}
                    <div style={{ display: 'flex', gap: '10px', marginBottom: '15px' }}>
                        {[1, 2, 3].map(g => (
                            <button
                                key={g}
                                onClick={() => setActiveGroup(g)}
                                style={{
                                    flex: 1,
                                    padding: '12px',
                                    border: 'none',
                                    borderRadius: '12px',
                                    background: activeGroup === g ? groups[g].color[500] : groups[g].color[100],
                                    color: activeGroup === g ? 'white' : groups[g].color[700],
                                    fontWeight: '600',
                                    cursor: 'pointer',
                                    transition: 'all 0.2s ease',
                                }}
                            >
                                Nh√≥m {g}
                            </button>
                        ))}
                    </div>

                    {/* Active Group Content */}
                    <Card style={{ borderTop: '4px solid ' + groups[activeGroup].color[500] }}>
                        <h3 style={{ color: groups[activeGroup].color[700], marginBottom: '15px' }}>
                            {groups[activeGroup].title}
                        </h3>
                        
                        {activeGroup === 2 && (
                            <div style={{
                                background: colors.green[100],
                                padding: '10px 15px',
                                borderRadius: '10px',
                                marginBottom: '15px',
                                color: colors.green[700]
                            }}>
                                <Icons.Sparkle /> <strong>ƒê∆°n gi·∫£n nh·∫•t!</strong> Ch·ªâ c·∫ßn b·ªè „Çã r·ªìi th√™m „Å¶„Åó„Åæ„ÅÜ
                            </div>
                        )}
                        
                        <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                            {groups[activeGroup].rules.map((rule, idx) => (
                                <div key={idx} style={{
                                    display: 'grid',
                                    gridTemplateColumns: '80px 80px 1fr 1fr',
                                    gap: '10px',
                                    alignItems: 'center',
                                    padding: '12px',
                                    background: idx % 2 === 0 ? groups[activeGroup].color[50] : 'white',
                                    borderRadius: '10px',
                                }}>
                                    <div style={{ 
                                        fontWeight: '600', 
                                        color: groups[activeGroup].color[700],
                                        fontSize: '14px'
                                    }} className="japanese">
                                        {rule.ending}
                                    </div>
                                    <div style={{ 
                                        color: groups[activeGroup].color[500],
                                        fontWeight: '700'
                                    }} className="japanese">
                                        {rule.change}
                                    </div>
                                    <div className="japanese" style={{ color: colors.slate[600] }}>
                                        {rule.example}
                                    </div>
                                    <div className="japanese" style={{ 
                                        fontWeight: '700', 
                                        color: groups[activeGroup].color[700],
                                        background: groups[activeGroup].color[100],
                                        padding: '5px 10px',
                                        borderRadius: '8px',
                                        textAlign: 'center'
                                    }}>
                                        {rule.result}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </Card>

                    {/* Mini Quiz */}
                    <Card variant="amber">
                        <div style={{ marginBottom: '15px' }}>
                            <Icons.Pencil /> <strong>LUY·ªÜN T·∫¨P NHANH (+5ƒë m·ªói c√¢u ƒë√∫ng)</strong>
                        </div>
                        
                        {quizItems.map((item, idx) => (
                            <div key={idx} style={{
                                display: 'flex',
                                alignItems: 'center',
                                gap: '15px',
                                marginBottom: '12px',
                                padding: '12px',
                                background: 'white',
                                borderRadius: '10px',
                            }}>
                                <span className="japanese" style={{ 
                                    fontWeight: '600',
                                    minWidth: '80px'
                                }}>
                                    {item.verb}
                                </span>
                                <Icons.ArrowRight />
                                <input
                                    type="text"
                                    placeholder="Nh·∫≠p ƒë√°p √°n..."
                                    value={quizAnswers[idx] || ''}
                                    onChange={(e) => setQuizAnswers({...quizAnswers, [idx]: e.target.value})}
                                    disabled={showAnswers}
                                    className="japanese"
                                    style={{
                                        flex: 1,
                                        padding: '10px',
                                        border: '2px solid ' + (
                                            showAnswers && quizAnswers[idx] === item.answer ? colors.green[400] :
                                            showAnswers && quizAnswers[idx] !== item.answer ? colors.red[400] :
                                            colors.slate[300]
                                        ),
                                        borderRadius: '8px',
                                        fontSize: '18px',
                                        background: showAnswers && quizAnswers[idx] === item.answer ? colors.green[50] :
                                            showAnswers ? colors.red[50] : 'white',
                                    }}
                                />
                                {showAnswers && quizAnswers[idx] !== item.answer && (
                                    <span className="japanese" style={{ color: colors.green[600], fontWeight: '600' }}>
                                        {item.answer}
                                    </span>
                                )}
                            </div>
                        ))}
                        
                        {!showAnswers ? (
                            <Button onClick={checkQuiz} fullWidth variant="primary">
                                <Icons.Check /> Ki·ªÉm tra ƒë√°p √°n
                            </Button>
                        ) : (
                            <div style={{ 
                                textAlign: 'center', 
                                padding: '10px',
                                background: colors.green[100],
                                borderRadius: '10px',
                                color: colors.green[700]
                            }}>
                                <Icons.Check /> ƒê√£ ho√†n th√†nh! Xem ƒë√°p √°n ·ªü tr√™n.
                            </div>
                        )}
                    </Card>

                    {/* Navigation */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '20px' }}>
                        <Button variant="secondary" onClick={onPrev}>‚Üê Quay l·∫°i</Button>
                        <Button onClick={onNext} disabled={!showAnswers}>
                            Ti·∫øp theo <Icons.ArrowRight />
                        </Button>
                    </div>
                </div>
            );
        }

        // ==================== STEP 4: LISTEN & SPEAK ====================
        function Step4_ListenSpeak({ onNext, onPrev, addScore }) {
            const [completedSentences, setCompletedSentences] = useState([]);
            
            const sentences = [
                {
                    jp: 'ÂÆøÈ°å„ÇíÂÖ®ÈÉ®„ÇÑ„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ',
                    pronunciation: '„Åó„ÇÖ„Åè„Å†„ÅÑ „Çí „Åú„Çì„Å∂ „ÇÑ„Å£„Å¶ „Åó„Åæ„ÅÑ„Åæ„Åó„Åü',
                    meaning: 'T√¥i ƒë√£ l√†m xong h·∫øt b√†i t·∫≠p r·ªìi.',
                    emotion: 'happy',
                    tip: 'Nh·∫•n m·∫°nh "„ÇÑ„Å£„Å¶" v·ªõi gi·ªçng t·ª± h√†o!'
                },
                {
                    jp: 'Ë≤°Â∏É„Çí„Å™„Åè„Åó„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ',
                    pronunciation: '„Åï„ÅÑ„Åµ „Çí „Å™„Åè„Åó„Å¶ „Åó„Åæ„ÅÑ„Åæ„Åó„Åü',
                    meaning: 'T√¥i ƒë√£ l·ª° l√†m m·∫•t v√≠ r·ªìi.',
                    emotion: 'sad',
                    tip: 'N√≥i v·ªõi gi·ªçng bu·ªìn, ti·∫øc nu·ªëi ·ªü cu·ªëi c√¢u!'
                },
                {
                    jp: '„Ç±„Éº„Ç≠„ÇíÂÖ®ÈÉ®È£ü„Åπ„Å°„ÇÉ„Å£„ÅüÔºÅ',
                    pronunciation: '„Åë„Éº„Åç „Çí „Åú„Çì„Å∂ „Åü„Åπ„Å°„ÇÉ„Å£„Åü',
                    meaning: 'T·ªõ ƒÉn h·∫øt s·∫°ch b√°nh r·ªìi!',
                    emotion: 'casual',
                    tip: 'Gi·ªçng th√¢n m·∫≠t, vui v·∫ª ho·∫∑c h∆°i √°y n√°y!'
                },
            ];

            const markComplete = (idx) => {
                if (!completedSentences.includes(idx)) {
                    setCompletedSentences([...completedSentences, idx]);
                    addScore(10);
                }
            };

            return (
                <div>
                    <Card variant="orange">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '15px' }}>
                            <span style={{ 
                                background: colors.orange[500], 
                                color: 'white', 
                                padding: '5px 12px', 
                                borderRadius: '20px',
                                fontSize: '14px',
                                fontWeight: '600'
                            }}>
                                CHUNK 4
                            </span>
                            <h2 style={{ color: colors.orange[700], margin: 0 }}>
                                <Icons.Mic /> Luy·ªán nghe - n√≥i
                            </h2>
                        </div>
                        <p style={{ color: colors.slate[600] }}>
                            ƒê·ªçc to m·ªói c√¢u <strong>3 l·∫ßn</strong> v·ªõi ƒë√∫ng c·∫£m x√∫c ƒë·ªÉ ghi nh·ªõ t·ªët h∆°n!
                        </p>
                    </Card>

                    {sentences.map((s, idx) => (
                        <Card 
                            key={idx} 
                            variant={s.emotion === 'happy' ? 'green' : s.emotion === 'sad' ? 'red' : 'orange'}
                            highlight={completedSentences.includes(idx)}
                        >
                            <div style={{ display: 'flex', alignItems: 'flex-start', gap: '15px' }}>
                                <div style={{
                                    fontSize: '32px',
                                    flexShrink: 0,
                                }}>
                                    {s.emotion === 'happy' ? 'üòä' : s.emotion === 'sad' ? 'üò¢' : 'üòÑ'}
                                </div>
                                <div style={{ flex: 1 }}>
                                    <div className="japanese" style={{ 
                                        fontSize: '24px', 
                                        fontWeight: '700',
                                        marginBottom: '8px',
                                        color: colors.slate[800]
                                    }}>
                                        {s.jp}
                                    </div>
                                    <div style={{ 
                                        fontSize: '14px', 
                                        color: colors.slate[500],
                                        marginBottom: '8px'
                                    }} className="japanese">
                                        {s.pronunciation}
                                    </div>
                                    <div style={{ 
                                        fontSize: '16px',
                                        color: colors.slate[600],
                                        marginBottom: '12px'
                                    }}>
                                        ‚Üí {s.meaning}
                                    </div>
                                    <div style={{
                                        background: colors.amber[100],
                                        padding: '10px',
                                        borderRadius: '8px',
                                        fontSize: '14px',
                                        marginBottom: '12px'
                                    }}>
                                        <Icons.Bulb /> <strong>M·∫πo:</strong> {s.tip}
                                    </div>
                                    <Button
                                        variant={completedSentences.includes(idx) ? "success" : "outline"}
                                        onClick={() => markComplete(idx)}
                                        size="small"
                                    >
                                        {completedSentences.includes(idx) ? (
                                            <><Icons.Check /> ƒê√£ ƒë·ªçc 3 l·∫ßn! +10ƒë</>
                                        ) : (
                                            <><Icons.Mic /> T√¥i ƒë√£ ƒë·ªçc to 3 l·∫ßn</>
                                        )}
                                    </Button>
                                </div>
                            </div>
                        </Card>
                    ))}

                    {/* Progress indicator */}
                    <div style={{
                        textAlign: 'center',
                        padding: '15px',
                        background: colors.slate[100],
                        borderRadius: '12px',
                        marginBottom: '20px'
                    }}>
                        <strong>Ti·∫øn ƒë·ªô:</strong> {completedSentences.length}/{sentences.length} c√¢u
                        <div style={{
                            background: colors.slate[200],
                            borderRadius: '10px',
                            height: '8px',
                            marginTop: '10px',
                            overflow: 'hidden'
                        }}>
                            <div style={{
                                background: colors.green[500],
                                height: '100%',
                                width: (completedSentences.length / sentences.length * 100) + '%',
                                transition: 'width 0.3s ease'
                            }} />
                        </div>
                    </div>

                    {/* Navigation */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '20px' }}>
                        <Button variant="secondary" onClick={onPrev}>‚Üê Quay l·∫°i</Button>
                        <Button onClick={onNext} disabled={completedSentences.length < sentences.length}>
                            Ti·∫øp theo <Icons.ArrowRight />
                        </Button>
                    </div>
                </div>
            );
        }

        // ==================== STEP 5: PRACTICE ====================
        function Step5_Practice({ onNext, onPrev, addScore }) {
            const [currentQ, setCurrentQ] = useState(0);
            const [answers, setAnswers] = useState({});
            const [showFeedback, setShowFeedback] = useState(false);

            const questions = [
                {
                    type: 'meaning',
                    question: 'C√¢u n√†y mang √Ω nghƒ©a g√¨?',
                    sentence: 'Ë©¶È®ì„Å´ËêΩ„Å°„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ',
                    options: ['Ho√†n th√†nh (t√≠ch c·ª±c)', 'Ti·∫øc nu·ªëi (ti√™u c·ª±c)'],
                    correct: 1,
                    explanation: '"R·ªõt k·ª≥ thi" l√† ƒëi·ªÅu ƒë√°ng ti·∫øc ‚Üí √ù nghƒ©a ti·∫øc nu·ªëi'
                },
                {
                    type: 'fill',
                    question: 'ƒêi·ªÅn v√†o ch·ªó tr·ªëng:',
                    sentence: 'ÈõªËªä„ÅßÂØù___„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ',
                    options: ['„Å¶', '„Åß', '„Å£„Å¶'],
                    correct: 0,
                    explanation: 'ÂØù„Çã (nh√≥m 2) ‚Üí ÂØù„Å¶ + „Åó„Åæ„ÅÜ'
                },
                {
                    type: 'transform',
                    question: 'Chuy·ªÉn sang d·∫°ng r√∫t g·ªçn:',
                    sentence: 'Âøò„Çå„Å¶„Åó„Åæ„Å£„Åü',
                    options: ['Âøò„Çå„Å°„ÇÉ„Å£„Åü', 'Âøò„Çå„Åò„ÇÉ„Å£„Åü', 'Âøò„Çå„Åó„Åæ„Å£„Åü'],
                    correct: 0,
                    explanation: '„Å¶ + „Åó„Åæ„ÅÜ ‚Üí „Å°„ÇÉ„ÅÜ'
                },
            ];

            const handleAnswer = (optionIdx) => {
                const newAnswers = { ...answers, [currentQ]: optionIdx };
                setAnswers(newAnswers);
                setShowFeedback(true);
                
                if (optionIdx === questions[currentQ].correct) {
                    addScore(10);
                }
            };

            const nextQuestion = () => {
                setShowFeedback(false);
                if (currentQ < questions.length - 1) {
                    setCurrentQ(currentQ + 1);
                }
            };

            const q = questions[currentQ];

            return (
                <div>
                    <Card variant="orange">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '15px' }}>
                            <span style={{ 
                                background: colors.orange[500], 
                                color: 'white', 
                                padding: '5px 12px', 
                                borderRadius: '20px',
                                fontSize: '14px',
                                fontWeight: '600'
                            }}>
                                CHUNK 5
                            </span>
                            <h2 style={{ color: colors.orange[700], margin: 0 }}>
                                <Icons.Pencil /> Th·ª±c h√†nh t·ªïng h·ª£p
                            </h2>
                        </div>
                        <div style={{ color: colors.slate[600] }}>
                            C√¢u {currentQ + 1}/{questions.length} | +10ƒë m·ªói c√¢u ƒë√∫ng
                        </div>
                    </Card>

                    <Card highlight>
                        <div style={{ 
                            fontSize: '14px', 
                            color: colors.orange[600],
                            marginBottom: '10px',
                            fontWeight: '600'
                        }}>
                            {q.type === 'meaning' ? 'üìù PH√ÇN BI·ªÜT √ù NGHƒ®A' : 
                             q.type === 'fill' ? '‚úèÔ∏è ƒêI·ªÄN V√ÄO CH·ªñ TR·ªêNG' : 'üîÑ CHUY·ªÇN ƒê·ªîI'}
                        </div>
                        
                        <div style={{ fontSize: '18px', marginBottom: '15px', color: colors.slate[700] }}>
                            {q.question}
                        </div>
                        
                        <div className="japanese" style={{
                            fontSize: '28px',
                            fontWeight: '700',
                            textAlign: 'center',
                            padding: '20px',
                            background: colors.slate[50],
                            borderRadius: '12px',
                            marginBottom: '20px',
                            color: colors.slate[800]
                        }}>
                            {q.sentence}
                        </div>

                        <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                            {q.options.map((opt, idx) => (
                                <button
                                    key={idx}
                                    onClick={() => !showFeedback && handleAnswer(idx)}
                                    disabled={showFeedback}
                                    className={q.type !== 'meaning' ? 'japanese' : ''}
                                    style={{
                                        padding: '15px 20px',
                                        fontSize: '18px',
                                        border: '2px solid ' + (
                                            showFeedback && idx === q.correct ? colors.green[500] :
                                            showFeedback && answers[currentQ] === idx && idx !== q.correct ? colors.red[500] :
                                            colors.slate[300]
                                        ),
                                        borderRadius: '12px',
                                        background: showFeedback && idx === q.correct ? colors.green[100] :
                                            showFeedback && answers[currentQ] === idx && idx !== q.correct ? colors.red[100] :
                                            'white',
                                        cursor: showFeedback ? 'default' : 'pointer',
                                        textAlign: 'left',
                                        transition: 'all 0.2s ease',
                                    }}
                                >
                                    {opt}
                                    {showFeedback && idx === q.correct && ' ‚úÖ'}
                                    {showFeedback && answers[currentQ] === idx && idx !== q.correct && ' ‚ùå'}
                                </button>
                            ))}
                        </div>

                        {showFeedback && (
                            <div style={{
                                marginTop: '20px',
                                padding: '15px',
                                background: answers[currentQ] === q.correct ? colors.green[50] : colors.amber[100],
                                borderRadius: '12px',
                                borderLeft: '4px solid ' + (answers[currentQ] === q.correct ? colors.green[500] : colors.amber[500])
                            }} className="animate-in">
                                <div style={{ fontWeight: '600', marginBottom: '5px' }}>
                                    {answers[currentQ] === q.correct ? (
                                        <span style={{color: colors.green[700]}}><Icons.Check /> Ch√≠nh x√°c! +10 ƒëi·ªÉm</span>
                                    ) : (
                                        <span style={{color: colors.amber[700]}}><Icons.Bulb /> Gi·∫£i th√≠ch:</span>
                                    )}
                                </div>
                                <div style={{ color: colors.slate[600] }}>{q.explanation}</div>
                            </div>
                        )}
                    </Card>

                    {/* Navigation */}
                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '20px' }}>
                        <Button variant="secondary" onClick={onPrev}>‚Üê Quay l·∫°i</Button>
                        {showFeedback && currentQ < questions.length - 1 ? (
                            <Button onClick={nextQuestion}>
                                C√¢u ti·∫øp theo <Icons.ArrowRight />
                            </Button>
                        ) : showFeedback && currentQ === questions.length - 1 ? (
                            <Button onClick={onNext} variant="success">
                                Ki·ªÉm tra cu·ªëi <Icons.Trophy />
                            </Button>
                        ) : null}
                    </div>
                </div>
            );
        }

        // ==================== STEP 6: FINAL TEST ====================
        function Step6_FinalTest({ onNext, onPrev, addScore, setTotalQuestions }) {
            const [answers, setAnswers] = useState({});
            const [submitted, setSubmitted] = useState(false);
            const [score, setScore] = useState(0);

            const questions = [
                { q: '„Å¶„Åó„Åæ„ÅÜ c√≥ m·∫•y √Ω nghƒ©a ch√≠nh?', opts: ['1', '2', '3'], correct: 1 },
                { q: 'È£ü„Åπ„Çã ‚Üí ÔΩû„Å¶„Åó„Åæ„ÅÜ?', opts: ['È£ü„Åπ„Å£„Å¶„Åó„Åæ„ÅÜ', 'È£ü„Åπ„Å¶„Åó„Åæ„ÅÜ', 'È£ü„Åπ„Åß„Åó„Åæ„ÅÜ'], correct: 1, jp: true },
                { q: 'Ë™≠„ÇÄ ‚Üí ÔΩû„Å¶„Åó„Åæ„ÅÜ?', opts: ['Ë™≠„Çì„Åß„Åó„Åæ„ÅÜ', 'Ë™≠„ÅÑ„Å¶„Åó„Åæ„ÅÜ', 'Ë™≠„Åó„Å¶„Åó„Åæ„ÅÜ'], correct: 0, jp: true },
                { q: 'D·∫°ng r√∫t g·ªçn c·ªßa „Å¶„Åó„Åæ„ÅÜ l√†?', opts: ['„Å°„ÇÉ„ÅÜ', '„Åó„ÇÉ„ÅÜ', '„Å°„ÇÖ„ÅÜ'], correct: 0, jp: true },
                { q: '„Äå„Å™„Åè„Åó„Å¶„Åó„Åæ„Å£„Åü„Äçnghƒ©a l√†?', opts: ['ƒê√£ ho√†n th√†nh (vui)', 'ƒê√£ l·ª° l√†m m·∫•t (ti·∫øc)'], correct: 1 },
            ];

            useEffect(() => {
                setTotalQuestions(questions.length);
            }, []);

            const handleSubmit = () => {
                let correct = 0;
                questions.forEach((q, idx) => {
                    if (answers[idx] === q.correct) correct++;
                });
                setScore(correct);
                addScore(correct * 20);
                setSubmitted(true);
            };

            return (
                <div>
                    <Card variant="orange">
                        <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '15px' }}>
                            <span style={{ 
                                background: colors.red[500], 
                                color: 'white', 
                                padding: '5px 12px', 
                                borderRadius: '20px',
                                fontSize: '14px',
                                fontWeight: '600'
                            }}>
                                B√ÄI KI·ªÇM TRA
                            </span>
                            <h2 style={{ color: colors.orange[700], margin: 0 }}>
                                <Icons.Target /> Ki·ªÉm tra t·ªïng h·ª£p
                            </h2>
                        </div>
                        <p style={{ color: colors.slate[600] }}>
                            {questions.length} c√¢u h·ªèi | +20ƒë m·ªói c√¢u ƒë√∫ng | T·ªïng: +{questions.length * 20}ƒë
                        </p>
                    </Card>

                    {questions.map((q, idx) => (
                        <Card key={idx} variant={submitted ? (answers[idx] === q.correct ? 'green' : 'red') : 'default'}>
                            <div style={{ fontWeight: '600', marginBottom: '12px', color: colors.slate[800] }}>
                                C√¢u {idx + 1}: {q.q}
                            </div>
                            <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
                                {q.opts.map((opt, optIdx) => (
                                    <label 
                                        key={optIdx}
                                        style={{
                                            display: 'flex',
                                            alignItems: 'center',
                                            gap: '10px',
                                            padding: '12px',
                                            borderRadius: '10px',
                                            cursor: submitted ? 'default' : 'pointer',
                                            background: submitted && optIdx === q.correct ? colors.green[100] :
                                                submitted && answers[idx] === optIdx && optIdx !== q.correct ? colors.red[100] :
                                                answers[idx] === optIdx ? colors.orange[100] : colors.slate[50],
                                            border: '2px solid ' + (
                                                submitted && optIdx === q.correct ? colors.green[400] :
                                                submitted && answers[idx] === optIdx && optIdx !== q.correct ? colors.red[400] :
                                                answers[idx] === optIdx ? colors.orange[400] : 'transparent'
                                            ),
                                        }}
                                    >
                                        <input
                                            type="radio"
                                            name={`q${idx}`}
                                            checked={answers[idx] === optIdx}
                                            onChange={() => !submitted && setAnswers({...answers, [idx]: optIdx})}
                                            disabled={submitted}
                                        />
                                        <span className={q.jp ? 'japanese' : ''} style={{ fontSize: '16px' }}>
                                            {opt}
                                        </span>
                                        {submitted && optIdx === q.correct && ' ‚úÖ'}
                                        {submitted && answers[idx] === optIdx && optIdx !== q.correct && ' ‚ùå'}
                                    </label>
                                ))}
                            </div>
                        </Card>
                    ))}

                    {!submitted ? (
                        <Button 
                            onClick={handleSubmit} 
                            fullWidth 
                            size="large"
                            disabled={Object.keys(answers).length < questions.length}
                        >
                            <Icons.Check /> N·ªôp b√†i ki·ªÉm tra
                        </Button>
                    ) : (
                        <Card variant="amber" style={{ textAlign: 'center' }}>
                            <div style={{ fontSize: '48px', marginBottom: '15px' }}>
                                {score === questions.length ? 'üèÜ' : score >= questions.length * 0.6 ? 'üëç' : 'üí™'}
                            </div>
                            <div style={{ fontSize: '24px', fontWeight: '700', color: colors.slate[800] }}>
                                K·∫øt qu·∫£: {score}/{questions.length} c√¢u ƒë√∫ng
                            </div>
                            <div style={{ fontSize: '18px', color: colors.orange[600], marginTop: '10px' }}>
                                +{score * 20} ƒëi·ªÉm
                            </div>
                            <div style={{ marginTop: '20px' }}>
                                <Button onClick={onNext} variant="success" size="large">
                                    Xem k·∫øt qu·∫£ t·ªïng <Icons.Trophy />
                                </Button>
                            </div>
                        </Card>
                    )}

                    {/* Navigation */}
                    {!submitted && (
                        <div style={{ marginTop: '20px' }}>
                            <Button variant="secondary" onClick={onPrev}>‚Üê Quay l·∫°i √¥n t·∫≠p</Button>
                        </div>
                    )}
                </div>
            );
        }

        // ==================== STEP 7: RESULTS ====================
        function Step7_Results({ score, totalQuestions, onRestart }) {
            const maxScore = 200; // Estimated max
            const percentage = Math.min(Math.round((score / maxScore) * 100), 100);
            
            const getGrade = () => {
                if (percentage >= 90) return { grade: 'S', color: colors.orange[500], text: 'XU·∫§T S·∫ÆC!', emoji: 'üèÜ' };
                if (percentage >= 80) return { grade: 'A', color: colors.green[500], text: 'Gi·ªèi l·∫Øm!', emoji: '‚≠ê' };
                if (percentage >= 70) return { grade: 'B', color: colors.green[400], text: 'T·ªët!', emoji: 'üëç' };
                if (percentage >= 60) return { grade: 'C', color: colors.amber[500], text: 'Kh√°!', emoji: 'üí™' };
                return { grade: 'D', color: colors.red[500], text: 'C·∫ßn √¥n th√™m', emoji: 'üìö' };
            };

            const result = getGrade();

            return (
                <div>
                    <Card style={{
                        background: 'linear-gradient(135deg, ' + colors.orange[500] + ', ' + colors.red[500] + ')',
                        color: 'white',
                        textAlign: 'center',
                        padding: '40px 20px'
                    }}>
                        <div style={{ fontSize: '80px', marginBottom: '20px' }}>{result.emoji}</div>
                        <h1 style={{ fontSize: '36px', marginBottom: '10px' }}>HO√ÄN TH√ÄNH!</h1>
                        <p style={{ fontSize: '20px', opacity: 0.9 }}>B·∫°n ƒë√£ h·ªçc xong m·∫´u ng·ªØ ph√°p ÔΩû„Å¶„Åó„Åæ„ÅÜ</p>
                    </Card>

                    <Card style={{ textAlign: 'center' }}>
                        <div style={{
                            width: '150px',
                            height: '150px',
                            borderRadius: '50%',
                            background: 'linear-gradient(135deg, ' + result.color + ', ' + colors.slate[200] + ')',
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            margin: '0 auto 20px',
                            fontSize: '64px',
                            fontWeight: '900',
                            color: 'white',
                            boxShadow: '0 10px 40px ' + result.color + '40',
                        }}>
                            {result.grade}
                        </div>
                        
                        <div style={{ fontSize: '28px', fontWeight: '700', color: colors.slate[800], marginBottom: '10px' }}>
                            {result.text}
                        </div>
                        
                        <div style={{ fontSize: '48px', fontWeight: '900', color: colors.orange[600], marginBottom: '20px' }}>
                            {score} <span style={{ fontSize: '24px', color: colors.slate[500] }}>ƒëi·ªÉm</span>
                        </div>

                        {/* Stats */}
                        <div style={{ 
                            display: 'grid', 
                            gridTemplateColumns: 'repeat(3, 1fr)', 
                            gap: '15px',
                            marginTop: '20px'
                        }}>
                            <div style={{ 
                                background: colors.green[50], 
                                padding: '15px', 
                                borderRadius: '12px' 
                            }}>
                                <div style={{ fontSize: '24px' }}><Icons.Book /></div>
                                <div style={{ fontWeight: '600', color: colors.green[700] }}>6 ph·∫ßn</div>
                                <div style={{ fontSize: '14px', color: colors.slate[500] }}>ƒë√£ h·ªçc</div>
                            </div>
                            <div style={{ 
                                background: colors.orange[50], 
                                padding: '15px', 
                                borderRadius: '12px' 
                            }}>
                                <div style={{ fontSize: '24px' }}><Icons.Mic /></div>
                                <div style={{ fontWeight: '600', color: colors.orange[700] }}>9+ c√¢u</div>
                                <div style={{ fontSize: '14px', color: colors.slate[500] }}>ƒë√£ ƒë·ªçc to</div>
                            </div>
                            <div style={{ 
                                background: colors.red[50], 
                                padding: '15px', 
                                borderRadius: '12px' 
                            }}>
                                <div style={{ fontSize: '24px' }}><Icons.Target /></div>
                                <div style={{ fontWeight: '600', color: colors.red[700] }}>5 c√¢u</div>
                                <div style={{ fontSize: '14px', color: colors.slate[500] }}>ki·ªÉm tra</div>
                            </div>
                        </div>
                    </Card>

                    {/* Key Takeaways */}
                    <Card variant="amber">
                        <h3 style={{ color: colors.slate[800], marginBottom: '15px' }}>
                            <Icons.Brain /> Ghi nh·ªõ ch√≠nh:
                        </h3>
                        <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                            <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>
                                <span style={{ color: colors.green[600], fontSize: '20px' }}>‚úì</span>
                                <span><strong>C√¥ng th·ª©c:</strong> ƒê·ªông t·ª´ th·ªÉ „Å¶ + „Åó„Åæ„ÅÜ</span>
                            </div>
                            <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>
                                <span style={{ color: colors.green[600], fontSize: '20px' }}>‚úì</span>
                                <span><strong>2 √Ω nghƒ©a:</strong> Ho√†n th√†nh üòä & Ti·∫øc nu·ªëi üò¢</span>
                            </div>
                            <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>
                                <span style={{ color: colors.green[600], fontSize: '20px' }}>‚úì</span>
                                <span><strong>R√∫t g·ªçn:</strong> ÔΩû„Å°„ÇÉ„ÅÜ / ÔΩû„Åò„ÇÉ„ÅÜ (th√¢n m·∫≠t)</span>
                            </div>
                            <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>
                                <span style={{ color: colors.green[600], fontSize: '20px' }}>‚úì</span>
                                <span><strong>M·∫πo nh·ªõ:</strong> "„Åó„Åæ„ÅÜ" = "shi-M·∫§T" ‚Üí L√†m xong M·∫§T lu√¥n!</span>
                            </div>
                        </div>
                    </Card>

                    <div style={{ display: 'flex', gap: '15px', marginTop: '20px' }}>
                        <Button variant="secondary" onClick={onRestart} fullWidth>
                            <Icons.Rocket /> H·ªçc l·∫°i t·ª´ ƒë·∫ßu
                        </Button>
                        <Button variant="primary" fullWidth>
                            <Icons.ArrowRight /> B√†i ti·∫øp theo
                        </Button>
                    </div>

                    {/* Footer */}
                    <div style={{ 
                        textAlign: 'center', 
                        marginTop: '30px', 
                        color: colors.slate[500],
                        fontSize: '14px'
                    }}>
                        <div>30 th√°ng 11 nƒÉm 2025</div>
                        <div style={{ fontWeight: '600', color: colors.orange[600] }}>L√™ Long S∆°n | TIKME Learning</div>
                    </div>
                </div>
            );
        }

        // ==================== RENDER ====================
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
